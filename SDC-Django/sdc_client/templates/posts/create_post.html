{% comment %} 
  Ruta: SDC-Django/sdc_client/templates/posts/create_post.html
{% endcomment %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'login/styles/register.css' %}">
    <title>Crear Publicación</title>
    <style>
        /* Estilos rápidos para los radio buttons */
        .form-field ul { list-style: none; padding-left: 0; }
        .form-field ul li { display: inline-block; margin-right: 15px; }
        .form-field ul li label { margin-left: 5px; font-weight: 400; }
        
        .form-field input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }
        .form-field .help-text {
            font-size: 0.8em;
            color: #ccc;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="register-card" style="max-width: 600px;">
            <h2>Crear Nueva Publicación</h2>

            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <p class="message {{ message.tags }}">{{ message }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <form method="POST" novalidate class="form active">
                {% csrf_token %}
                
                {% if form.non_field_errors %}
                    <div class="form-error-general">
                        {% for error in form.non_field_errors %} <p>{{ error }}</p> {% endfor %}
                    </div>
                {% endif %}

                {% comment %} 
                  Campos dinámicos para Instituciones.
                  Django no los renderizará si los eliminamos en el forms.py
                {% endcomment %}
                
                {% if form.post_type %}
                <div class="form-field">
                    {{ form.post_type.label_tag }}
                    {{ form.post_type }}
                    <small class="form-error">{{ form.post_type.errors }}</small>
                </div>
                {% endif %}

                {% if form.is_campaign %}
                <div class="form-field">
                    <label>{{ form.is_campaign.label_tag }}</label>
                    <div>
                        {{ form.is_campaign }}
                        <span class="help-text">{{ form.is_campaign.help_text }}</span>
                    </div>
                    <small class="form-error">{{ form.is_campaign.errors }}</small>
                </div>
                {% endif %}

                {% if form.post_type or form.is_campaign %}
                    <hr style="border-color: rgba(255,255,255,0.1); margin: 10px 0;">
                {% endif %}

                <div class="form-field">
                    {{ form.title.label_tag }}
                    {{ form.title }}
                    <small class="form-error">{{ form.title.errors }}</small>
                </div>
                
                <div class="form-field">
                    {{ form.category.label_tag }}
                    {{ form.category }}
                    <small class="form-error">{{ form.category.errors }}</small>
                </div>

                <div class="form-field">
                    {{ form.quantity.label_tag }}
                    {{ form.quantity }}
                    <small class="form-error">{{ form.quantity.errors }}</small>
                </div>

                <div class="form-field">
                    {{ form.description.label_tag }}
                    {{ form.description }}
                    <small class="form-error">{{ form.description.errors }}</small>
                </div>

                <button type="submit" class="btn primary">Publicar</button>
            </form>
        </div>
    </div>
</body>
</html>